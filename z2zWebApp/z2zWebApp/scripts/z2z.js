//Fetch (yet to come) and draw the branch of the day on the property background

//var divProperty = d3.select(".properties");

//var svgProperty = divProperty.append("svg:svg")
//    .attr("width", "100%")
//    .attr("height", "100%")
//    .attr("id", "maisondelabranche")
//    .style("position", "absolute");

//svgProperty.append("svg:path")
//    .attr("d", "M202.913 244.928c-1.34459,-0.940219 -1.93988,-1.17122 -3.97297,-1.39097l-0.297196 -1.753 2.95214 0.358886 1.31802 2.78508zm0 0c2.98321,2.29426 4.99874,4.74883 11.0048,4.80917 3.34075,0.0333219 4.54799,0.00810534 7.55012,-0.602947 2.70853,-0.551613 4.5642,0.541707 7.09667,0.586736 0.117527,-3.61498 -6.52254,-10.0488 -11.1219,-11.9977 -4.26161,-1.80524 -16.1094,-5.27072 -16.2174,3.20836 -2.85173,-0.0261172 -3.26105,-0.749293 -4.98793,-2.04525 -4.16929,-3.12956 -11.1746,-4.9429 -16.4511,-5.72057 -7.45421,-1.09827 -17.2391,2.90711 -22.7314,5.98714 -6.59234,3.69693 -11.4902,8.7272 -15.0043,14.1051 -3.95,6.04523 -5.86556,14.1785 -6.03577,23.3749 -1.4387,-0.74479 -1.40943,-2.50815 -1.90115,-3.8784 -9.49765,-26.4698 -8.77042,-53.0053 0.308003,-79.4791 2.24113,-6.53605 4.83168,-11.4835 8.67856,-16.2859 2.19249,-2.73735 6.55451,-7.28219 10.3217,-8.07877 7.98601,-1.68816 6.40231,-0.370144 6.77831,0.978494 1.93177,6.92376 10.5185,5.1622 14.8972,3.11965 4.96272,-2.31497 7.15386,-4.93255 11.1444,-7.71448 2.31903,-1.61656 2.60722,-0.534052 3.37722,-3.06247 -7.18538,-4.19046 -27.6469,-3.88471 -29.9506,4.76999l-5.55981 0.483618c0.870873,-1.84441 2.88325,-2.74861 4.77494,-3.75322 1.85927,-0.98705 4.1738,-2.0466 4.83078,-3.93784 -2.83191,0.0639421 -3.17099,1.31667 -5.22974,1.56343 1.11538,-2.3555 1.32973,-0.976243 3.23988,-2.16277 3.52627,-2.19069 6.03667,-11.6158 5.10321,-12.412 -0.625912,-0.533601 -6.13394,1.83406 -8.24718,4.39489 -5.12302,6.20959 -1.87729,7.60731 -0.785317,9.16443 -3.60462,4.2463 1.07846,0.495776 -5.65978,5.21173 -1.34819,0.943821 -1.98085,1.61251 -3.05076,2.29831 -3.99368,2.56039 -10.5491,10.3176 -13.3508,14.4797 -5.3896,8.00717 -7.25968,13.6998 -10.0087,23.0156 -0.882131,2.98862 -1.68456,9.13066 -1.92907,9.60527 -0.155803,-0.282786 -1.87819,-15.632 -2.13666,-17.2031l-2.38702 -12.4917c-0.962734,-4.54844 -0.986149,-4.33906 2.38522,-5.55621 1.50174,-0.542157 2.02949,-1.10143 3.90092,-1.01902 0.409319,-0.904646 1.0564,-0.643023 1.63683,-2.85983 -3.50286,0.179668 -2.02318,1.16762 -4.52503,1.22661 -0.263423,0.935266 0.338623,0.793422 -1.9786,1.74265 -0.854212,0.34988 -1.73769,0.750194 -2.49239,1.08206 -1.52921,-6.73463 -3.29482,-12.5218 -5.32025,-18.812 -1.87684,-5.82999 -5.13023,-11.2065 -7.05254,-17.0455 -3.23718,-9.83312 -4.05132,-20.1129 -0.27333,-30.7165l2.15962 -6.763c0.706515,-1.73319 0.344026,-1.56748 1.88899,-1.77777 0,-1.02713 0.322863,-0.900593 -0.409319,-0.900593 0.679497,0.935266 -0.0108071,0.436337 1.55037,-0.74389 0.456601,-0.344927 0.263423,-0.00585385 0.765054,-0.557467 0.94112,-1.03478 0.194078,0.596192 0.957781,-1.56073 -2.83507,0.0427782 -3.97927,0.662836 -5.0064,2.6581 -0.670041,5.82458 -5.29819,2.35955 -7.57489,23.9864 -0.403466,3.83292 0.325114,7.04714 0.297646,10.3442 -5.32656,-4.62454 -13.3643,-8.70423 -20.8127,-7.92837 -1.25047,0.130586 -2.81345,0.571426 -4.48405,0.293593 -1.676,-0.278733 -1.5945,-0.975792 -3.31328,-1.51795 0.112124,-6.26002 -4.46064,-10.0222 -10.6437,-9.88176 -4.61914,0.104919 -8.7416,2.42305 -12.1071,3.17684 -2.42034,0.542157 -2.26454,-0.119329 -4.51017,-0.109422 -0.381401,2.60767 2.27895,4.24855 3.97161,5.50622 4.48991,3.3349 9.32339,5.03386 15.4938,4.7808 4.04321,-0.166159 4.78665,-1.59945 7.46727,-2.70403 0.697059,0.836651 0.639871,0.570075 1.41573,1.28425 -2.43385,1.17617 -3.63524,0.597543 -9.07482,3.86219 -8.18774,4.91409 -15.2065,13.8628 -16.5957,23.8806 -1.11583,8.05175 3.73476,15.8387 7.64693,18.9899 5.86871,4.72721 10.7378,6.14339 20.9316,6.14339 -0.285938,0.81999 -0.572327,1.00011 -1.15051,1.83541 -5.11672,-0.450747 -7.12864,0.16751 -10.4933,3.03905 -2.13395,1.82145 -5.6251,4.77765 -6.04838,8.46963 4.70785,-0.000900593 13.8844,-0.884382 16.8681,-4.57636 2.19204,-2.71169 0.398512,-4.07608 0.770457,-5.97543 0.761001,-3.8802 9.71785,-3.33985 12.6731,-8.42234 0.69886,-1.20184 2.2857,-3.46458 1.36845,-5.02306 -1.37385,0.457501 -0.761001,0.59169 -1.37836,2.12855 -0.988401,2.46132 -4.19451,4.5552 -6.87468,5.40851 -4.38183,1.39547 -9.75477,1.42609 -14.2884,0.503431 -18.0826,-3.67937 -24.221,-22.4113 -8.41334,-38.3009 5.12753,-5.15454 13.1009,-9.69894 23.9355,-8.60471 17.8304,1.80119 25.0284,21.8569 29.2526,35.7013 1.30811,4.28727 5.29729,23.0583 5.87096,26.8233 1.33153,8.738 2.46853,22.4162 1.89665,31.0182 -3.45107,-1.65079 0.30395,-2.33344 -1.36755,-7.42854 -2.02138,-6.16276 -9.45893,-6.80758 -15.1349,-10.6401 -3.34435,-2.25779 -2.58425,4.89652 3.4988,14.1281 0.839803,1.27479 3.8775,3.50781 5.74173,3.99413 4.16884,1.08702 4.24359,-1.6634 7.32632,1.95384 0.104919,6.31676 1.29595,12.7276 2.45907,18.2167l3.65776 17.1527c-3.84418,-1.069 -0.716422,-1.6652 -7.14485,-6.32757 -3.15883,-2.29111 -2.79769,-2.69502 -7.73339,-5.7674 -5.67689,-3.53393 -12.0135,-6.09836 -18.5292,-8.5079 -5.65572,-2.09163 -14.9904,-4.44443 -22.6414,-3.47449 -9.50801,1.20544 -3.52267,0.366992 -11.103,2.30056 -2.66981,0.680848 -4.66282,0.69841 -7.44475,2.40593 -1.51029,0.927611 -0.844306,1.00911 -2.66305,1.15816 -0.761001,0.873125 0.355284,0.0873575 -1.39367,0.703813 -0.701562,0.246762 -1.37385,0.50118 -2.13486,0.706965 -2.34559,0.634468 -3.51591,-0.42508 -5.30809,1.0591 0.791171,0.655181 0.0238657,0.283687 1.19644,0.655181 1.24777,0.39491 3.2588,0.230552 4.50927,0.012158 1.87323,-0.327366 3.18765,-0.751094 4.51287,-1.71518 9.24909,-9.76513 44.8819,-0.594391 49.1192,4.72541 -3.86985,0.174265 -11.7689,-2.84047 -23.7572,0.00900593 -10.7423,2.55363 -28.5871,8.90326 -36.7406,15.605 -5.86556,4.82132 -8.39398,6.21904 -12.2737,13.8804 -6.91475,13.6539 -5.89348,23.7288 -2.78869,37.783 0.337722,1.52831 1.09467,3.18134 1.77462,4.86635 2.82921,7.00976 5.26577,11.4492 11.0683,15.0876 2.7351,1.71518 6.49147,2.61397 10.3217,2.80174 3.40244,0.16706 3.30112,-0.0864569 5.80522,-0.894289 2.80129,-0.903745 0.65248,0.901944 0.193627,2.86298 2.10378,4.65516 7.68611,4.88932 13.6579,4.88707 -0.255318,-2.42575 -4.75243,-6.3028 -8.53222,-7.36505 -1.61656,-0.453899 -2.08622,-0.685351 -3.23853,-1.78227 -0.0526847,-0.0504332 -0.156253,-0.153551 -0.226499,-0.237306 1.15681,-1.59045 3.80951,-2.4289 6.11638,-1.7539 0.479115,-0.561069 3.46863,-0.611052 3.84598,-0.684901 0.362038,-0.0706965 0.998758,0.0189125 2.02633,-0.832148 -2.04885,-1.69717 -4.7862,-0.406618 -6.95528,-0.407518 0,-2.52526 0.165709,-0.18192 -0.890236,-1.22616 0.347179,2.03309 0.840253,1.70302 -3.58931,2.44916 0,-7.38936 0.640772,-1.83901 3.30698,-10.885l2.77653 -11.9684c-7.08136,0.389506 -21.0496,13.4486 -16.6452,19.4911 0.666439,0.915002 2.32893,2.02093 4.00449,2.22897 2.44601,0.30305 3.87165,-0.54621 5.38645,-1.36575l0.0697959 3.44927c-11.075,6.20328 -18.2663,-0.24361 -24.7069,-9.10634 -3.22097,-4.43182 -5.87412,-15.999 -6.73418,-21.9511 -1.07981,-7.47132 2.4271,-17.0626 5.44228,-23.1218 2.13891,-4.29943 5.41256,-7.69782 8.48809,-10.7364 4.98838,-4.92849 10.6081,-8.32058 17.3175,-11.3141 2.51581,-1.12214 4.44713,-1.66655 7.22321,-2.61397 4.44893,-1.51885 10.4685,-2.66801 15.5744,-3.74512 17.0446,-3.59607 30.4126,0.697959 42.3711,12.4737 8.17783,8.05265 11.1363,11.6366 17.0752,21.3531 2.5748,4.21207 4.3305,7.87118 6.9931,12.2562 1.88404,3.10209 6.33657,8.62453 7.8194,11.959 -3.88336,0.0301699 -4.67588,0.973991 -4.95011,4.4048 -0.195879,2.45096 0.556116,6.20824 1.64718,7.73699 0.912301,1.27794 3.14667,3.88966 4.66417,4.75018 7.93377,4.50026 12.3359,-5.05953 0.246762,-6.6788 -5.34772,-0.715971 -4.57456,0.448495 -5.14644,-2.0457 -1.71563,-7.48888 3.00573,-6.92061 4.31609,-7.41278l10.8936 12.7794c7.54292,9.38193 24.2007,23.6045 33.8686,31.5671 1.62377,1.33738 2.26364,0.920856 2.23977,3.68703 -2.77473,-1.28785 -5.71381,-2.39828 -9.46343,-1.19554 -3.1165,0.999208 -5.0879,3.32274 -6.84496,5.05458 -4.33635,4.27421 -4.39129,7.2214 -7.1399,10.015 -1.17032,1.18968 -2.48744,1.67555 -2.94494,3.05211 6.84361,2.72204 19.7563,-1.0699 25.9267,-8.26969 2.52526,-2.94629 1.975,-5.55576 1.79713,-9.32924 1.75661,0.71372 4.53088,3.17549 6.07945,4.45703 -2.22852,3.9536 -4.76639,-0.519642 -8.16027,7.43529 -1.72599,4.04501 -1.74985,9.6431 -0.557467,13.9358 2.57119,-1.06855 11.297,-8.98431 10.2713,-15.5406 -0.312055,-1.99706 -3.96486,-4.018 0.158054,-4.60968 1.75796,2.61667 1.0645,4.62274 0.370594,8.75511 -1.47292,8.76952 -0.875827,6.88548 -1.27659,13.8034 -0.497127,8.58805 0.0436788,7.71763 0.0139592,14.7076 -0.0580882,13.6264 -0.00495326,27.2664 -0.00630415,40.8946 -0.000900593,13.037 0.479115,26.3122 0.404817,40.0705 -0.0463805,8.61417 -0.982097,33.4206 3.28716,37.8024 4.06573,-1.78227 1.45446,-6.82019 1.27434,-16.1472l-0.391308 -19.6104c0,-6.54191 0.0220645,-13.087 -0.00135089,-19.6284 -0.012158,-3.32364 0.385454,-6.01371 0.3805,-9.40219 -0.00540356,-3.6438 -0.398963,-6.38881 -0.383202,-9.80926 0.0612403,-13.3522 -0.751545,-25.6115 -0.766405,-38.8489 -0.0139592,-12.4714 0.00540356,-24.611 3.04851,-36.5443 2.73285,0.397612 4.42281,3.18179 6.21994,4.67993 5.6922,4.74567 10.885,10.4334 15.4006,16.5052 6.32531,8.5052 11.7388,16.942 16.3525,26.59 6.34243,13.2635 17.7786,44.0381 15.8986,58.4098 -0.462004,3.53167 -0.149498,7.48303 3.90227,5.97273 2.84137,-1.05955 2.28796,-4.99919 1.85657,-8.31292 -1.52605,-11.7275 -1.53281,-14.6562 -5.27162,-27.0561 -1.94798,-6.45995 -5.6904,-17.2346 -8.55383,-23.2997 -4.17425,-8.84157 -7.16467,-15.9684 -4.73081,-25.9911 2.50815,-10.3289 7.02733,-20.9541 15.6982,-27.1569 2.0493,-1.46617 4.55025,-3.21377 7.35514,-2.86749 3.10975,0.384553 7.00661,0.510636 8.71053,2.47528 0.887084,0.528198 0.97264,0.662386 1.59225,1.15546 1.73589,1.38196 0.0396261,0.732182 2.59911,1.09197 -0.59259,-4.20982 -2.00337,-2.00652 -2.86389,-4.07428 -2.46222,0.0477314 -5.52964,-1.27029 -8.85058,-1.69041 0.44084,-0.280084 0.433635,-0.184622 0.91095,-0.505233l1.04784 -0.81954c-2.727,-0.134188 -5.47515,-0.16661 -8.08102,0.428682 -6.09746,1.39232 -10.0713,5.50037 -14.0497,10.369 -4.29628,5.25766 -9.67822,14.6067 -9.67822,23.4541 -2.02949,-0.398512 -4.80466,-5.59899 -4.91273,-5.89843 2.53157,-1.88134 2.60632,-1.90205 2.60632,-5.72417 1.54046,-1.48688 4.24539,-1.84171 5.34412,-5.771 1.72103,-6.15375 -1.49634,-12.058 -4.19766,-16.9591 -0.770908,-1.39862 -1.30631,-2.22672 -1.92322,-3.38353 -0.873125,-1.63863 -1.02487,-2.97151 -1.99301,-3.81131 -5.84485,2.88325 -6.60945,20.1413 -4.84159,25.3868 1.03613,3.07462 2.5086,4.34311 6.51264,4.34311 0,3.44026 0.191376,3.86444 -2.72294,4.96002 -0.367892,-0.869973 -9.8696,-12.7317 -10.9881,-13.9943 -0.918154,-1.03613 -1.94708,-2.30687 -2.86749,-3.2606 -1.12304,-1.16312 -1.81875,-2.17043 -2.8936,-3.25564 -2.51355,-2.53697 -7.01427,-5.87006 -9.78629,-9.0415 -1.24507,-1.42429 -0.655181,-2.32488 -0.180569,-4.22918 2.46762,-9.89977 3.07733,-10.3987 6.11548,-19.2317 3.60552,-10.4806 1.50804,-7.02147 7.06965,-17.8403 3.33985,-6.49643 10.2258,-19.1678 13.4769,-24.1458 10.1006,-15.4654 22.1487,-31.8211 42.8687,-32.3187 8.22557,-0.19768 13.3054,3.37317 18.2212,6.58874 2.80445,1.83496 3.61138,3.33715 5.79486,6.4586 16.3822,23.4186 -13.6705,55.169 -30.1455,34.649 -1.95609,-2.4361 -3.33535,-4.65426 -3.8676,-8.51646 -0.602497,-4.36968 -0.823142,-7.57264 1.02397,-10.989 4.21703,-7.79958 7.62037,-8.19314 17.1468,-5.88943 -0.763252,-2.54553 -4.15489,-3.21917 -7.37405,-3.28851 -8.61102,-0.185072 -13.2675,7.02643 -15.0881,14.3518 -0.405717,1.63413 -0.346278,1.49994 -1.00956,2.10604 -3.4227,-3.84508 -5.57782,-6.56622 -12.9546,-6.51264 1.29865,2.77968 5.33646,9.97857 8.5804,10.3019 2.60406,0.259821 3.29707,-1.04694 5.09871,-2.03669 0,3.73566 1.43104,4.31969 -1.62287,5.13608 -0.148598,0.831698 -0.278283,1.63097 -0.271979,2.51581 0.000450296,0.0315208 0.101767,1.22481 0.10672,1.24417 0.325564,1.27434 0.158504,0.85016 0.784416,1.60486l0.468759 -0.83485c0.768656,-2.01508 0.13644,-1.46617 0.443992,-2.4361 -0.0459302,-1.86603 -0.630865,-0.461104 0.214791,-1.65574 1.65979,1.45536 1.91961,7.43935 10.6576,11.5429 12.7348,5.98039 29.1391,-1.75345 34.6566,-16.6583 0.666439,-1.80029 1.56703,-8.66415 1.83766,-9.10049l0 -6.91385c-0.332769,-0.643474 -0.111674,-0.144995 -0.299447,-0.993354 -0.0797025,-0.362489 -0.12113,-0.695708 -0.188674,-1.0708 -0.120679,-0.666889 -0.275131,-1.44995 -0.537654,-2.30552 -0.446244,-1.45356 -0.806931,-2.63243 -1.43555,-3.91623 -7.56948,-15.4618 -24.8275,-24.6735 -42.6741,-18.1154 -1.33513,0.490373 -2.49104,1.01137 -3.74962,1.53686 -1.61386,0.674094 -2.06461,1.41708 -3.76358,1.81199 0,-3.07958 0.298547,-5.90699 1.91421,-7.77122 3.6528,0.715971 2.66621,0.623661 6.55271,0.381851 2.8103,-0.174715 4.1801,-0.259371 6.35683,-1.32837 2.41629,-1.18653 2.81796,-1.66835 4.40255,-3.36957 3.89326,-4.18055 6.15375,-10.0866 7.7478,-15.5033 0.758299,-2.5784 2.24383,-6.26903 3.99188,-7.94458 1.42879,-1.36935 0.715071,0.335921 1.43014,-2.24248 -12.1404,-1.72373 -31.9751,9.45668 -32.7442,22.7066 -0.457501,7.87163 2.15557,3.78114 0.511537,7.58975 -1.25678,2.91207 -1.23606,4.7898 -1.23606,8.27735 -2.00607,1.5247 -3.98377,2.3555 -6.29019,3.54969 -0.328266,-1.57018 0.976693,-5.13473 1.52335,-7.25383 2.43295,-9.43461 1.96059,-23.7878 0.80513,-33.7619 -3.71359,-32.0652 -12.2697,-44.746 -34.3504,-65.9401 -5.36168,-5.14644 -13.4319,-11.5902 -19.08,-17.3107 -3.06832,-3.10795 -5.91464,-5.91419 -9.00863,-9.00728 -14.8832,-14.8778 -29.7646,-41.7497 -25.0059,-64.3028 2.00787,-9.51611 8.79339,-16.8204 15.6973,-20.6781 4.23099,-2.36361 7.91216,-3.99278 13.073,-4.89517 5.19777,-0.908698 11.8869,-0.890236 17.1176,-0.0234154 4.49936,0.745241 9.67012,2.37576 13.3432,4.59843 7.80184,4.72046 13.6489,9.99028 18.1262,18.2753 2.1218,3.92658 4.19136,8.52366 5.16535,13.2828 2.26859,11.0858 1.33783,22.0906 -3.45062,30.4274 -3.71495,6.46806 -12.1422,14.0506 -22.3086,14.079 -5.45444,0.0153101 -8.55608,-0.878078 -12.0729,-5.92995 -2.35775,-3.38758 -3.8694,-9.65976 -2.48158,-14.7967 1.39097,-5.14959 3.92298,-7.5965 7.9725,-9.92003 4.81862,-2.76392 9.95155,-2.16097 16.3093,-2.15467 0.0846557,-4.59032 -7.15431,-5.25541 -11.3943,-4.54574 -10.9246,1.82865 -19.736,11.356 -19.4028,23.8797 0.0837551,3.16243 1.22706,4.74162 1.55487,7.37766 -4.23774,-2.23887 -1.54317,-10.7954 -14.7706,-12.606 0.412472,4.92399 4.09455,6.58333 4.75153,9.29682 -1.58549,0.936166 -8.41469,4.76999 -9.05771,5.72462 0.857364,1.50804 3.26555,1.74085 4.6313,2.08352 3.65145,0.915453 7.88919,0.863218 11.2493,-0.605198 2.49284,-1.08927 2.04074,-2.23797 3.93289,-3.09804 2.11369,2.26949 1.37656,3.21602 6.64052,6.36899 14.2253,8.52096 35.5577,-3.39253 41.0202,-19.5604 1.07801,-3.1908 1.92187,-7.49203 2.29696,-10.9327 0.225148,-2.06416 0.112574,-11.8086 0.313406,-12.1598 2.1979,0.684451 0.313857,2.93188 5.0109,5.13518 7.6645,3.59517 16.5813,-1.7404 21.7038,-3.10119 1.49228,-0.396261 2.82111,-0.487221 3.84958,-1.33918 -1.18203,-3.76448 -9.99028,-6.69591 -14.2915,-7.56093 -2.92468,-0.588087 -7.38981,-1.15276 -10.3726,-0.528648 -3.69198,0.772258 -5.45219,2.36946 -5.45264,6.26993 -1.39727,-0.37915 -1.11088,-0.234154 -1.55577,-1.50039l-1.88449 -6.92286c2.85173,0.139142 8.44981,5.41977 13.2896,-3.61363 1.06135,-1.9804 1.98175,-5.26577 2.32083,-7.85452 0.25847,-1.9732 1.27929,-7.30111 1.00281,-8.66505 -5.04962,-0.300348 -12.2931,7.48438 -14.5428,11.4569 -1.66114,2.93323 -1.80434,3.54473 -1.6778,7.39792 -2.04164,0.131937 -1.02127,-0.769557 -3.47314,-5.28828 -2.59956,-4.79115 -8.14766,-12.4075 -12.3687,-15.4641 -4.31024,-3.121 -2.37802,-3.01383 -10.5536,-7.84056 -18.0011,-10.627 -45.5601,-5.94031 -59.3135,11.9644 -1.34098,1.7458 -2.38522,4.18235 -4.65156,4.97037 -0.907798,-7.80049 -1.0654,-11.8275 2.32668,-20.4385 1.86513,-4.73397 4.4093,-7.45196 7.968,-10.373 1.30316,-1.06945 2.63018,-1.24777 4.10941,-1.95924 1.37205,1.76066 -1.09782,-1.86873 0.418776,0.798826 0.412472,0.725428 0.130586,0.536753 0.618257,0.988401l0.190475 -1.85612c1.03613,0 2.29876,0.0864569 3.28086,0.0603397 1.56838,-0.0423279 2.02588,-0.190025 2.85443,-0.876277 -2.12495,-1.75976 -4.69614,-0.188224 -5.9304,-1.02397 -1.83541,1.28019 -3.00573,0.974441 -5.22434,2.15332 -1.61161,0.856914 -3.24664,1.8273 -4.86951,2.67476 0.205785,-1.79488 0.691205,-2.46267 0.724077,-4.46109 8.60156,-0.000900593 9.39634,-7.74555 7.72484,-14.613 -1.40492,-5.77325 -7.12279,-13.0514 -7.33443,-17.032l-0.770457 0c-7.41953,6.01416 -8.09813,24.5254 -4.33185,29.7871 1.3698,1.91421 1.55938,1.26713 3.54248,2.10604 -1.25903,11.7221 -17.6561,18.4689 -10.8949,53.0589 2.00562,10.2614 4.86815,16.3124 8.94154,25.0644 2.2821,4.90328 9.87005,16.2724 13.2909,20.6492 5.63636,7.21105 9.91913,11.7406 15.841,18.1055 0.985699,1.06 0.928061,1.46571 1.75976,2.32218 0.937967,0.966336 1.27299,0.916353 2.08667,2.01147 1.62377,2.18619 2.26409,2.98727 3.98647,4.60113 1.82055,1.70617 7.56498,7.17322 8.63533,8.53672 1.24597,1.58775 2.91072,2.17538 4.57006,3.61993 2.14386,1.86693 10.9373,11.0237 12.7155,13.0491 1.01992,1.16176 0.685801,1.30946 1.72914,2.35595 1.14691,1.14961 1.00146,0.764153 1.99166,2.11234 1.40808,1.91736 2.37081,3.42586 3.52357,5.04377 2.43745,3.42225 4.82177,6.66484 6.56757,10.9665 -1.25858,-0.643474 -0.12158,0.10627 -0.891137,-0.62231l-3.59201 -5.05052c-5.39815,-7.01382 -7.62892,-10.0592 -16.1373,-14.4986 -4.0216,-2.09793 -3.78204,-0.869973 -4.22243,-5.69355 -0.403466,-4.42326 0.0950125,-5.42202 -3.05976,-7.12684 -6.6036,-3.56815 -10.6121,-3.14262 -16.5583,-2.26769 0.343126,1.95474 7.4488,9.345 12.1499,10.4469 2.77563,0.650678 4.69884,-0.37915 6.39151,-1.22526l0.0441291 3.36056c-5.44318,-0.71417 -10.5329,-3.44207 -20.0364,0.10627 -4.39805,1.64268 -11.3326,6.79993 -12.3953,10.9485 2.10333,-0.285488 4.69839,-2.24248 5.90834,-3.10569 6.39646,-4.56285 13.6872,-7.00481 21.7363,-4.39309 10.1591,3.29617 16.9365,8.73395 22.7152,14.8706 14.4379,15.3339 20.9302,47.9678 11.0043,72.3221 -4.87311,11.9567 -12.6479,27.1565 -19.1624,37.2922 -9.78629,15.2259 -16.9217,31.4685 -21.0487,49.2462 -0.172013,0.739837 -0.260271,1.39367 -0.473262,1.97095 -0.451197,1.22075 -0.208487,0.817738 -1.00641,1.45671 -1.80119,-0.543508 -3.19395,-2.69592 -4.49441,-4.07023 -0.0148598,-0.0153101 -11.3871,-9.50351 -14.0456,-12.1157 -1.4423,-1.41753 -2.93143,-2.55678 -4.61554,-3.96936 -8.08102,-6.77876 -24.0314,-22.5256 -30.2941,-31.0718 -28.6969,-39.1587 -7.17953,-66.9429 13.2311,-62.6691 8.64434,1.81019 15.3682,9.92633 14.133,19.9513 -1.86423,15.1286 -14.1704,15.2898 -15.7014,19.5983 4.4818,-0.108071 7.92071,-2.22717 11.0818,-3.75727 -0.28909,1.91736 -0.891137,2.46087 -1.20454,4.1004 -3.89912,-1.62917 -7.13405,0.89609 -9.81916,4.1076 -2.08442,2.49284 -5.27883,6.51489 -4.92129,11.0408 1.82865,-0.66824 3.44972,-1.53461 5.28288,-2.12765 1.87008,-0.604748 4.04186,-1.14871 5.703,-2.02408 5.97408,-3.14847 5.27207,-6.18347 4.74207,-9.53142 -0.224698,-1.41663 1.11133,-3.87615 1.61071,-5.31665 1.11403,-3.21467 7.31822,-5.55441 8.40974,-14.9985 0.517841,-4.48 0.194078,-8.97756 -1.48508,-12.706 -0.960482,-2.1326 -1.95879,-3.14577 -3.08588,-4.7074 -1.07441,-1.48913 -2.65225,-2.42485 -4.27061,-3.488 -7.55057,-4.95866 -15.207,-5.3144 -24.8784,-2.95439 0.16751,-2.56084 9.52827,-6.58514 12.996,-7.46501 8.53312,-2.16503 17.9222,-1.37926 25.7353,2.71619 4.13867,2.16953 4.54934,2.22311 3.08093,5.65662 -2.49419,5.83044 3.33309,9.16128 5.17976,12.6115 0.89654,1.6751 0.0495326,0.997857 1.49273,1.39187 1.35404,-1.53056 1.436,-5.89528 1.32207,-7.77167 -0.190025,-3.13001 -0.950125,-4.51602 -2.11684,-6.93006z")
//    .attr("id", "lebranche")
//    //.attr("transform", "scale(7,7)")
//    .style("stroke-width", 0)
//    .style("stroke", "none")
//    .style("fill", "#ACA77B");

//Fetch (yet to come) and draw the cat of the day on the navigation background

var divNavigation = d3.select(".navigation");

var svgcanvas = divNavigation.append("svg:svg")
    .attr("width", "100%")
    .attr("height", "100%")
    .attr("id", "maisondulechat");

var svgWidth = svgcanvas.node().clientWidth;
var svgHeight = svgcanvas.node().clientHeight;

svgcanvas.append("svg:path")
    .attr("d", "M431.583 227.114l8.5452 -21.828c1.57876,-37.7046 -6.40923,-90.4224 -12.5752,-129.043 -1.50159,-9.39802 14.5856,-110.755 -28.6636,-63.9654 -4.5087,4.87755 -10.1985,13.5745 -13.3129,20.5435l-32.262 2.57546c-5.97628,-10.5792 -15.1219,-20.6626 -31.9951,-18.2728 -2.33217,9.68578 1.80112,20.5592 5.53679,29.179 5.26603,12.1514 -1.87699,15.4816 -2.68534,29.9442 -1.42442,25.4512 15.4789,33.8577 22.1799,52.3542 -4.18823,7.50534 -22.8692,21.9287 -31.3071,28.7016 -19.4788,15.6372 -34.483,-0.966616 -82.8831,38.7405 -10.9716,9.003 -17.6555,22.0582 -28.8625,32.5641 -4.00904,3.7579 -9.79566,11.381 -13.789,16.3213 -5.03321,6.22611 -8.5609,10.7335 -13.0578,17.0211 -28.7853,40.2526 -49.0227,81.3802 -48.8671,135.482 -22.5893,1.95285 -46.1451,3.15099 -68.7697,4.39882 -11.4804,0.633075 -22.6874,1.28446 -33.982,2.7128 -10.5739,1.33547 -23.633,1.79458 -24.8325,13.0617 13.3731,7.99061 63.0393,4.63819 81.0754,4.37659 28.1836,-0.408098 52.7754,6.80425 82.4972,-0.340082 7.24112,-1.73965 9.84536,-4.81215 15.5587,-2.875 7.36669,2.49698 9.98662,3.06727 18.3762,3.70296 25.4682,1.93062 60.9792,0.188353 86.9144,-1.42834 13.2906,-0.829276 29.7781,0.253753 36.0172,-8.66685 3.17715,-19.3951 -17.5587,-20.5619 -34.4071,-21.0458 11.9212,-11.5157 7.12602,-0.289069 24.1092,-23.17 3.87824,-5.22548 19.0014,-19.8215 24.6337,-22.5029 1.7161,9.02786 5.02797,20.0975 7.49487,29.1332 2.66048,9.74072 4.75591,20.3539 7.99192,29.9481 8.17373,24.2347 47.2661,16.5986 56.1671,12.6223 3.09605,-17.6725 -3.56824,-22.5893 -19.4265,-19.5024 -5.78793,-16.2167 -12.7531,-25.6814 -11.5261,-46.9744 0.761259,-13.2383 8.80811,-34.7315 13.6033,-46.3086 10.3568,-24.9986 7.91474,-19.8542 21.7561,-38.4161 5.59042,-7.49487 18.3958,-28.818 20.7476,-39.044z")
    .attr("id", "lechat")
    //.attr("transform", "translate(300,80)")
    .attr("transform", "translate(300," + svgHeight/5 + ")")
    .style("stroke-width", 0)
    .style("stroke", "none")
    .style("fill", "#848688");

// ********* Define events for circle pack
var hoverName = function (d, i) {
    //var name = d.name;
    //d3.select("label#circleType").text("" + d.__type);
    //d3.select("label#circleName").text("" + name);
    var thisobj = this.__data__; 
    var proparray = []; 
    for (i = 0; i < Object.keys(thisobj).length; i++) {
        var keyname = Object.keys(thisobj)[i];
        var valuename = thisobj[keyname];
        var obj = { thiskey: keyname, thisvalue: valuename };
        proparray.push(obj);
    }
    var props = d3.select("div.properties").selectAll("label.lblproperty");
    var propsdata = props.data(proparray);
    //update
    propsdata.each(function (d) {
        d3.select(this)
            .text(function (d) { return d.thisvalue });
    });
    //enter
    propsdata.enter().append("label")
        .classed("lblproperty", true)
        .text("" + d.thisvalue);
    var ex = propsdata.exit();
    ex.remove(); 
}

// Functions for drawing an arc based on a circle's data - to give text a path to sit upon 
function polarToCartesian(centerX, centerY, radius, angleInDegrees) {
    var angleInRadians = (angleInDegrees - 90) * Math.PI / 180.0;

    return {
        x: centerX + (radius * Math.cos(angleInRadians)),
        y: centerY + (radius * Math.sin(angleInRadians))
    };
}

function describeArc(x, y, r, startAngle, endAngle) {

    var start = polarToCartesian(x, y, r, endAngle);
    var end = polarToCartesian(x, y, r, startAngle);

    var arcSweep = endAngle - startAngle <= 180 ? "0" : "1";
    var d = [
        "M", start.x, start.y,
        "A", r, r, 0, arcSweep, 0, end.x, end.y
    ].join(" ");

    return d;
}

//// *********** Draw a circle-pack diagram using data given 
var width = 400,
height = 400;

//Append a group for the circle pack to the exising svg canvas
var circleGroup = svgcanvas
        .append("g")
        .attr("transform", "translate(300,60)");

//Calibrate pack layout 
var pack = d3.layout.pack()
    .size([width, height])
    .value(function (d) { return d.name.length; });

//Draw the pack layout given data from ajax call 
var drawCirclePack = function (ajaxMsg) {

    //Grey out le chat
    d3.select("#lechat")
        .transition()
        .duration(2000)
        .style("fill", "#E6E7E8");

    var data = new Object();
    data.children = ajaxMsg.d;

    // DATA JOIN
    // Join new data with old elements, if any.
    var node = circleGroup.selectAll("g")
                    .data(pack.nodes(data));

    //UPDATE
    node.select("circle").attr("class", "updatedCircle");
    node.select("title").text(function (d) { return d.name }); 
    node.select("text").text(function (d) { return d.name });
    node.select("path.paths")
        .transition()
        .duration(2000)
        .attr("d", function (d) { return describeArc(d.x, d.y, d.r, 180, 270); });
    node.select("textPath.pathText")
        .transition()
        .duration(2000)
        .text(function (d) { return d.name });

    //ENTER
    var nodeg = node.enter()
        .append("g")
        .on("mouseover", hoverName)
        .attr("class", function (d) { return d.children ? "node" : "leaf"; })
        .each(function (d) {
            if (d.depth > 0) {
                var pathid = this.__data__.r;
                d3.select(this).append("title")
                .text(function (d) { return d.name });
                d3.select(this).append("path")
                .attr("id", pathid)
                .attr("stroke", "#446688")
                .attr("stroke-width", function (d) { return 14 - (d.depth * 3) })
                .attr("transform", function (d) { return "translate(-" + d.x + ",-" + d.y + ")"; })
                .attr("transform", "translate(0,0)")
                .attr("class", "paths")
                d3.select(this).append("text")
                    .append("textPath")
                    .attr("class", "pathText")
                    .attr("xlink:href", "#" + pathid)
                    .text(function (d) { return d.name });
            }
            else {
                //d3.select(this).select("circle").classed("node", false);
                //d3.select(this).select("circle").classed("firstCircle", true);
                //d3.select(this).select("svg:circle").style("fill", "none");
                //d3.select(d3.select(this).node()).classed("firstCircle", true);
            }
        });
    
    nodeg.append("circle")
        .attr("r", 0)
        .transition()
        .duration(2000)
        .attr("r", function (d) { return d.r; })
        ;

    d3.selectAll("path.paths")
        .transition()
        .duration(2000)
        .attr("d", function (d) { return describeArc(d.x, d.y, d.r, 180, 270); })
        .attr("transform", function (d) { return "translate(-" + d.x + ",-" + d.y + ")"; });  

    //ENTER & UPDATE

    //Reflect DATA through POSITION
    node.transition()
        .duration(2000)
        .attr("transform", function (d) { return "translate(" + d.x + "," + d.y + ")"; });

    //Reflect DATA through SIZE
    node.select("circle")
        .transition()
        .duration(2000)
        .attr("r", function (d) { return d.r; });

    //EXIT
    node.exit()
        .transition()
        //.duration(2000)
        .attr("r", 0)
        .remove();
}

//Fetch all kinds of shit 
var ajaxData = function AjaxCall(d, i) {

    $.ajax({
        type: "POST",
        url: "admindashboard.aspx/" + d.methodName,
        data: "{}",
        contentType: "application/json",
        dataType: "json"
    })
    .done(function (msg) {
        // Feed the fetched data to the pack!
        drawCirclePack(msg);
    });
}

// *********** Hover/Click Functions for Categories

function hoverOverCategory(d, i) {
    var category = d3.select("div.catContainer").selectAll("div.category");
    var subcategory = d3.select(category[0][i]).selectAll("div.subCategory")
        .transition()
        .style("opacity", "1");
};

function hoverOutCategory(d, i) {
    var category = d3.selectAll("div.category");
    d3.select(category[0][i]).selectAll("div.subCategory")
        .transition()
        .style("opacity", "0");
};


//Bind Category hover/click events to functions 
d3.selectAll("div.category")
    .on("mouseover", hoverOverCategory)
    .on("mouseout", hoverOutCategory);

//Bind categories to method names 
var languageData = [{ methodName: "AjaxLanCollection" }];
d3.select("#catLanguage").data(languageData).on("click", ajaxData);
var jobtypeData = [{ methodName: "AjaxJbtCollection" }];
d3.select("#catService").data(jobtypeData).on("click", ajaxData);
var clndocData = [{ methodName: "AjaxClnDocCollection" }];
d3.select("#clndocuments").data(clndocData).on("click", ajaxData);
var clnjobData = [{ methodName: "AjaxClnJobCollection" }];
d3.select("#clnjobs").data(clnjobData).on("click", ajaxData);
var conlanData = [{ methodName: "AjaxConLanCollection" }];
d3.select("#conlanguages").data(conlanData).on("click", ajaxData);
